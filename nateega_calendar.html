<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نتيجة اليوم/Nateega</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .nateega-container {
            background: white;
            border: 8px solid #333;
            border-radius: 10px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .day-number {
            font-size: 72px;
            font-weight: bold;
            color: #333;
            line-height: 1;
        }

        .month-year {
            text-align: center;
            flex-grow: 1;
        }

        .month {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .day-name {
            font-size: 20px;
            color: #666;
            margin-bottom: 5px;
        }

        .year {
            font-size: 18px;
            color: #666;
        }

        .hijri-date {
            font-size: 16px;
            color: #4caf50;
            margin-top: 5px;
            font-weight: bold;
        }

        .time-display {
            text-align: center;
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
            margin: 30px 0;
            font-family: 'Courier New', monospace;
        }

        .prayer-times {
            background: #e8f5e9;
            border: 3px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .prayer-times-title {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 15px;
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .prayer-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .prayer-name {
            font-size: 16px;
            color: #2e7d32;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .prayer-time {
            font-size: 18px;
            color: #333;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .next-prayer {
            text-align: center;
            margin-top: 15px;
            padding: 12px;
            background: #4caf50;
            color: white;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
        }

        .wisdom-box {
            background: #f8f9fa;
            border: 3px solid #333;
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .wisdom-title {
            font-size: 18px;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .wisdom-text {
            font-size: 20px;
            line-height: 1.8;
            color: #333;
            text-align: center;
        }

        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            font-weight: bold;
            transition: background 0.3s;
        }

        .refresh-btn:hover {
            background: #764ba2;
        }

        @media (max-width: 600px) {
            .day-number {
                font-size: 48px;
            }

            .month {
                font-size: 22px;
            }

            .time-display {
                font-size: 36px;
            }

            .wisdom-text {
                font-size: 18px;
            }

            .prayer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="nateega-container">
        <div class="header">
            <div class="day-number" id="dayNumber"></div>
            <div class="month-year">
                <div class="month" id="monthName"></div>
                <div class="day-name" id="dayName"></div>
                <div class="year" id="yearNumber"></div>
                <div class="hijri-date" id="hijriDate"></div>
            </div>
            <div class="day-number" id="dayNumber2"></div>
        </div>

        <div class="time-display" dir="ltr" id="timeDisplay">00:00:00</div>

        <div class="prayer-times">
            <div class="prayer-times-title">مواقيت الصلاة</div>
            <div class="prayer-grid" id="prayerGrid">
                <div class="prayer-item">
                    <div class="prayer-name">الفجر</div>
                    <div class="prayer-time">--:--</div>
                </div>
                <div class="prayer-item">
                    <div class="prayer-name">الشروق</div>
                    <div class="prayer-time">--:--</div>
                </div>
                <div class="prayer-item">
                    <div class="prayer-name">الظهر</div>
                    <div class="prayer-time">--:--</div>
                </div>
                <div class="prayer-item">
                    <div class="prayer-name">العصر</div>
                    <div class="prayer-time">--:--</div>
                </div>
                <div class="prayer-item">
                    <div class="prayer-name">المغرب</div>
                    <div class="prayer-time">--:--</div>
                </div>
                <div class="prayer-item">
                    <div class="prayer-name">العشاء</div>
                    <div class="prayer-time">--:--</div>
                </div>
            </div>
            <div class="next-prayer" id="nextPrayer">جاري التحميل...</div>
        </div>

        <div class="wisdom-box">
            <div class="wisdom-title" id="wisdomTitle">آية كريمة</div>
            <div class="wisdom-text" id="wisdomText">جاري التحميل...</div>
        </div>

        <button class="refresh-btn" onclick="changeWisdom()">تحديث</button>
    </div>

    <script>
        const arabicMonths = [
            'يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو',
            'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'
        ];
        const arabicDays = [
            'الأحد', 'الإثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'
        ];
        const wisdomData = [
            {
                type: 'قرآن كريم',
                text: 'وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا'
            },
            {
                type: 'قرآن كريم',
                text: 'إِنَّ مَعَ الْعُسْرِ يُسْرًا'
            },
            {
                type: 'قرآن كريم',
                text: 'فَاذْكُرُونِي أَذْكُرْكُمْ'
            },
            {
                type: 'قرآن كريم',
                text: 'وَلَا تَيْأَسُوا مِن رَّوْحِ اللَّهِ'
            },
            {
                type: 'قرآن كريم',
                text: 'رَبِّ اشْرَحْ لِي صَدْرِي وَيَسِّرْ لِي أَمْرِي'
            }
        ];

        function updateDateTime() {
            const now = new Date();
            const day = now.getDate();
            const month = now.getMonth();
            const year = now.getFullYear();
            const dayOfWeek = now.getDay();

            document.getElementById('dayNumber').textContent = day;
            document.getElementById('dayNumber2').textContent = day;
            document.getElementById('monthName').textContent = arabicMonths[month];
            document.getElementById('dayName').textContent = arabicDays[dayOfWeek];
            document.getElementById('yearNumber').textContent = year;

            let hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');

            // document.getElementById('timeDisplay').textContent = `${hours}:${minutes}:${seconds}`;

            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12;
            const hoursStr = String(hours).padStart(2, '0');

            document.getElementById('timeDisplay').textContent = `${hoursStr}:${minutes}:${seconds} ${ampm}`;
            updateNextPrayer();
        }

        async function fetchHijriDate() {
            try {
                const today = new Date();
                const dd = String(today.getDate()).padStart(2, '0');
                const mm = String(today.getMonth() + 1).padStart(2, '0');
                const yyyy = today.getFullYear();

                const response = await fetch(`https://api.aladhan.com/v1/gToH/${dd}-${mm}-${yyyy}`);
                const data = await response.json();

                if (data.code === 200 && data.data.hijri) {
                    const hijri = data.data.hijri;
                    hijriDateText = `${hijri.day} ${hijri.month.ar} ${hijri.year} هـ`;
                    document.getElementById('hijriDate').textContent = hijriDateText;
                }
            } catch (error) {
                console.error('خطأ في تحميل التاريخ الهجري:', error);
            }
        }

        let prayerTimes = {};
        async function fetchPrayerTimes() {
            try {
                const currentDate = new Date();
                const formattedCurrentDate = String(currentDate.getDate()).padStart(2, '0') + '-' +
                    String(currentDate.getMonth() + 1).padStart(2, '0') + '-' + currentDate.getFullYear();
                apiUrl = `https://api.aladhan.com/v1/timingsByCity/${formattedCurrentDate}?city=Cairo&country=Egypt&method=5`

                const response = await fetch(apiUrl);
                const data = await response.json();
                if (data.data && data.data.timings) {
                    prayerTimes = data.data.timings;
                    displayPrayerTimes();
                }
            } catch (error) {
                console.error('خطأ في تحميل مواقيت الصلاة:', error);
            }
        }
        function displayPrayerTimes() {
            const prayers = [
                { name: 'الفجر', key: 'Fajr' },
                { name: 'الشروق', key: 'Sunrise' },
                { name: 'الظهر', key: 'Dhuhr' },
                { name: 'العصر', key: 'Asr' },
                { name: 'المغرب', key: 'Maghrib' },
                { name: 'العشاء', key: 'Isha' }
            ];

            const grid = document.getElementById('prayerGrid');
            grid.innerHTML = '';

            prayers.forEach(prayer => {
                const time = prayerTimes[prayer.key];
                const item = document.createElement('div');
                item.className = 'prayer-item';
                item.innerHTML = `
                    <div class="prayer-name">${prayer.name}</div>
                    <div class="prayer-time">${formatTime(time)}</div>
                `;
                grid.appendChild(item);
            });
        }

        function formatTime(time24) {
            if (!time24) return '--:--';
            const [hours, minutes] = time24.split(':');
            let hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            hour = hour % 12;
            hour = hour ? hour : 12;
            return `${String(hour).padStart(2, '0')}:${minutes} ${ampm}`;
        }

        function updateNextPrayer() {
            if (Object.keys(prayerTimes).length === 0) return;

            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();

            const prayers = [
                { name: 'الفجر', key: 'Fajr' },
                { name: 'الظهر', key: 'Dhuhr' },
                { name: 'العصر', key: 'Asr' },
                { name: 'المغرب', key: 'Maghrib' },
                { name: 'العشاء', key: 'Isha' }
            ];

            for (let prayer of prayers) {
                const time = prayerTimes[prayer.key];
                if (!time) continue;

                const [hours, minutes] = time.split(':');
                const prayerTime = parseInt(hours) * 60 + parseInt(minutes);

                if (prayerTime > currentTime) {
                    const diff = prayerTime - currentTime;
                    const hoursLeft = Math.floor(diff / 60);
                    const minutesLeft = diff % 60;
                    document.getElementById('nextPrayer').textContent =
                        `الصلاة القادمة: ${prayer.name} بعد ${hoursLeft > 0 ? hoursLeft + ' ساعة و' : ''}${minutesLeft} دقيقة`;
                    return;
                }
            }

            document.getElementById('nextPrayer').textContent = 'الصلاة القادمة: الفجر غداً';
        }

        let currentWisdomIndex = 0;
        let quranVerses = [];
        async function fetchQuranVerses() {
            try {
                const response = await fetch('https://api.alquran.cloud/v1/quran/ar.alafasy');
                const data = await response.json();

                if (data.code === 200 && data.data.surahs) {
                    data.data.surahs.forEach(surah => {
                        surah.ayahs.forEach(ayah => {
                            quranVerses.push({
                                type: 'قرآن كريم',
                                text: ayah.text,
                                surah: surah.name,
                                number: ayah.numberInSurah
                            });
                        });
                    });
                    console.log(`تم تحميل ${quranVerses.length} آية من القرآن الكريم`);
                    changeWisdom();
                }
            } catch (error) {
                console.error('خطأ في تحميل آيات القرآن:', error);
                changeWisdom();
            }
        }
        function changeWisdom() {
            let wisdom;

            if (quranVerses.length > 0 && Math.random() > 0.3) {
                const randomIndex = Math.floor(Math.random() * quranVerses.length);
                wisdom = quranVerses[randomIndex];
            } else {
                const randomIndex = Math.floor(Math.random() * wisdomData.length);
                wisdom = wisdomData[randomIndex];
            }

            document.getElementById('wisdomTitle').textContent = wisdom.type;
            document.getElementById('wisdomText').textContent = wisdom.text;
        }

        updateDateTime();
        fetchHijriDate();
        fetchPrayerTimes();
        fetchQuranVerses();

        setInterval(updateDateTime, 1000);
        setInterval(changeWisdom, 12000);
    </script>
</body>

</html>